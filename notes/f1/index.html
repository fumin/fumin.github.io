<html>
  <head>
    <meta charset="utf-8"/>
    <script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  </head>
  <body style="background-color: black; color: white; font-size: xx-large;">
    <div id="container" style="margin-left:auto; margin-right:auto; text-align: center;">
      <h1>F1 car spoilers</h1>
      <img id="img" src="f1.jpg" style="">
      <p>
        The spoilers on the two cars above have different shapes.
        The left car's spoiler is an ordinary rectangle, whereas the right spoiler has receding concavities at its bottom left and right corners.
      </p>
      <h3>Which design is better?</h3>
      <div>
        <iframe src="standard_mesh.html"></iframe>
        <div>Standard design</div>
      </div>
      <div style="margin-top: 1em;">
        <iframe src="curved_mesh.html"></iframe>
        <div>Curved design with receding concavities</div>
      </div>

      <h2>Answer</h2>
      <table style="margin-left: auto; margin-right: auto; border-spacing: 1em 0; font-size: xx-large;">
          <thead>
            <tr style="font-weight: bold;"><td>Force [\(kg\cdot m/s^{2}\)]</td><td>standard</td><td>curved</td></tr>
          </thead>
          <tbody>
            <tr><td>Drag</td><td>34.984</td><td>31.308</td></tr>
            <tr><td>Down-force</td><td>21.635</td><td>20.257</td></tr>
          </tbody>
        </table>
      <p>
        The table above shows that the curved design lessens the drag considerably at the expense of only a slight decrease in down-force.
        This suggests that the curved design is better than the standard one.
      </p>

      <p>
        The diagrams below show the Computational Fluid Dynamics results.
        Plots on the surface of the spoilers show the pressure.
        We see that the pressures on top of both spoilers are larger than their bottom counterparts, confirming the intuition about the spoilers providing additional down-force that help stabilize the vehicle.
      </p>
      <p>
        Plots along the drag direction show the turbulent kinetic energy.
        We see that the curved design results in less turbulent flow, reaffirming its superiority over the standard design in terms of both speed and stability.
      </p>
      <div>
        <iframe id="standard" src="standard.html" style=""></iframe>
        <div>Standard design. This is a 3D interactive graph. Use <i>Shift+Mouse</i> to pan; <i>Mouse</i> to rotate, and <i>scroll</i> to zoom.</div>
      </div>
      <div style="margin-top: 1.5em;">
        <iframe id="curved" src="curved.html" style=""></iframe>
        <div>Curved design. This is a 3D interactive graph.</div>
      </div>

    </div>

    <script>
function onWindowResizeContainer() {
  const container = document.querySelector("#container");
  if (document.body.clientWidth/document.body.clientHeight > 1024/768) {
    container.style.width = "70%";
  } else {
    container.style.width = "100%";
  }
}

function onWindowResizeImg() {
  var ref = document.body;
  var mTop = parseInt(window.getComputedStyle(ref).marginTop, 10);
  var mBottom = parseInt(window.getComputedStyle(ref).marginBottom, 10);
  var mLeft = parseInt(window.getComputedStyle(ref).marginLeft, 10);
  var mRight = parseInt(window.getComputedStyle(ref).marginRight, 10);
  var maxW = ref.clientWidth-mLeft-mRight;
  var maxH = 0.5 * (window.innerHeight-mTop-mBottom);

  var el = document.querySelector("#img");
  var w = el.width;
  var h = el.height;
  var wdh = w / h;
  if (w > maxW) {
    w = maxW;
    h = (1/wdh) * maxW;
  }
  if (h > maxH) {
    h = maxH;
    w = wdh * maxH;
  }
  
  el.style.width = w;
  el.style.height = h;
}

function onWindowResizeCFD(selector) {
  const el = document.querySelector(selector);
  const w = el.parentElement.clientWidth;
  const h = el.clientHeight / el.clientWidth * w;
  el.style["width"] = w;
  el.style["height"] = h;
}

function main() {
  onWindowResizeContainer();
  var imgEl = document.querySelector("#img");
  imgEl.addEventListener("load", function(e){
    onWindowResizeImg();
  });
  onWindowResizeCFD("#standard");
  onWindowResizeCFD("#curved");
}
main();
    </script>
  </body>
</html>
